<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<mongo-sql>
	<select id="findall">
		<find-sql>
			 { "movieTitle": (movieTitle) }
		</find-sql>
		<sort>
			{"movieTitle":1}
		</sort>
	</select>
	
	 <select id="select1">
		<find-sql>
			 { }
		</find-sql>
		<sort>
			{_id:1}
		</sort>
	</select>
	
	 <select id="search">
		<find-sql>
			 { 
			    $or:[
	                    { "movieTitle":{ $regex: (movieTitle) , $options: 'i' } }
			        ]   
			  }
			  <!--  { "movieTitle":{ $regex: (movieTitle).* , $options: 'i' } },
	                    { "description":{ $regex: '(description).*' , $options: 'i' } }
			   --> 
		</find-sql>
		<sort>
			{_id:1}
		</sort>
	</select>
	
	<select id="select2">
		<find-sql>
			{ _id: (id) }
		</find-sql>
		<!-- <fields>
			{"movieName" : 1}
		</fields>
		<sort>
			{"movieName":1}
		</sort>
		<limit>1</limit> -->
		<!-- <skip>1</skip> -->
	</select>
	
	<update id="updateId1" multi-update="false">
		<find-sql>
			{_id: (id) }
		</find-sql>
		<update-field>
			{
				$set : {"url": "//www.youtube.com/embed/UFuFFdK7i44?feature=player_detailpage" }
			}
		</update-field>
	</update>
	
	<delete id="d1">
		<find-sql>
				{"movieName": (movieName) }
		</find-sql>
	</delete>
	<delete id="d1">
		<find-sql>
				{"movieName": (movieName) }
		</find-sql>
	</delete>
	<aggregate id="agree1">
		<pipline-sql>
			{
				$match : { _id: { $gt : (id)} }
			}
		</pipline-sql>
		<pipline-sql>
			{
				$group : {
					"_id" : "$_id"
				}
			}
		</pipline-sql>
		<pipline-sql>
			{
				$project : {
					_id : 1,
					movieName: (count)
				}
			}
		</pipline-sql>
		<pipline-sql>
			{
$limit : 1

}
		</pipline-sql>
	</aggregate>
	<aggregate id="agree3">
		<pipline-sql>
			{
				$match : { _id: { $gt : 190} }
			}
		</pipline-sql>
		<!-- <pipline-sql>
			{
				$group : {
					"_id" : "$movieName"
				}
			} 
		</pipline-sql>-->
		<!-- <pipline-sql>
			{
				$project : {
					_id : 1,
					movieName: 1
				}
			}
		</pipline-sql>
		<pipline-sql>
			{
$limit : 1

}
		</pipline-sql> -->
	</aggregate>
</mongo-sql>
<!-- 
C:\jdk1.7.0_21\bin>xjc -p com.samsung.trailer.xsd -d C:\workspace\movie-trailer\src\main\java C:\workspace\movie-trailer\src\main\resources\META-INF\mongo\mongo-sql.xsd
 -->